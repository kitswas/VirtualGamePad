{%- assign sidebar_lang = include.lang | default: site.active_lang | default: page.lang | default: site.default_lang -%}
{%- if sidebar_lang == nil or sidebar_lang == '' -%}
  {%- assign sidebar_lang = site.default_lang -%}
{%- endif -%}
{%- if site.languages contains sidebar_lang -%}
  {%- assign home_path = '/' | append: sidebar_lang | append: '/' -%}
{%- else -%}
  {%- assign home_path = '/' -%}
{%- endif -%}

<div class="sidebar-sticky">
  <div class="sidebar-about">
    {% if site.logo %}
      <a class="no-hover" href="{{ home_path | relative_url }}" tabindex="-1">
        <img src="{% include_cached smart-url url=site.logo %}" class="avatar" alt="{{ site.short_title | default:site.title }}" width="120" height="120" loading="lazy" />
      </a>
    {% endif %}
    <a class="sidebar-title" href="{{ home_path | relative_url }}"><h2 class="h1">{{ site.short_title | default:site.title }}</h2></a>
    {% assign text = site.tagline | default:site.description %}
    {% if text %}
      <p class="{% if text.size > 100 %}fine{% endif %}">{{ text | markdownify | replace:'<p>','' | replace:'</p>','' }}</p>
    {% endif %}
  </div>

  <nav class="sidebar-nav heading" role="navigation">
    {%- comment -%}
      Pass down the resolved language so nav can render the correct menu.
    {%- endcomment -%}
    {% include body/nav.html lang=sidebar_lang %}
  </nav>

  {% assign author = site.data.authors.first[1] | default:site.author %}
  <div class="sidebar-social">
    {% include components/social.html author=author %}
  </div>
</div>
